# README.md 重构方案

## 📋 问题总结

### 🔴 严重问题（P0 - 必须立即修复）

#### 1. 侧边栏视图完全缺失 ⚠️⚠️⚠️
- **问题**：插件的主要交互方式是侧边栏，但 README 中没有任何关于侧边栏的说明
- **影响**：用户安装后不知道如何使用，找不到功能入口
- **位置**：整个文档
- **解决方案**：在"快速开始"前添加专门的"侧边栏视图"章节

#### 2. 快速开始流程过时 ⚠️⚠️
- **问题**：第 117-147 行还在教用户用命令面板（Cmd+Shift+P）
- **现状**：主要通过侧边栏操作
- **影响**：用户学习了错误的使用方式
- **解决方案**：改为"打开侧边栏 → 点击按钮"，而不是"打开命令面板 → 输入命令"

#### 3. 缺少关键截图/动图 ⚠️⚠️
- **缺失内容**：
  - ❌ 侧边栏整体视图（最重要！）
  - ❌ 随机起名交互流程动图
  - ❌ 敏感词检测效果图（波浪线 + Quick Fix）
  - ❌ 项目概览统计展示
- **影响**：用户无法直观了解功能
- **解决方案**：补充关键截图，优先截取侧边栏视图

### 🟡 中等问题（P1 - 应该优化）

#### 4. 功能特性章节太冗长 ⚠️
- **问题**：第 7-99 行，功能描述过于详细，像说明书
- **例如**：字数统计（第 18-30 行）13 行文字描述细节
- **建议**：核心功能用 1-2 句话概括 + 截图，细节放到"详细功能"或文档链接

#### 5. 配置章节信息过载 ⚠️
- **问题**：第 211-284 行（74 行），配置示例太长太详细
- **包含**：完整的 novel.json 示例（48 行）+ 逐项说明（13 行）
- **建议**：精简为 5 行核心配置 + 链接到配置文档

#### 6. 文件格式示例冗余 ⚠️
- **问题**：第 149-209 行（61 行），Front Matter 示例过于详细
- **建议**：简化为 3-5 行关键字段，完整示例放到文档

#### 7. 路线图过于详细 ⚠️
- **问题**：第 331-384 行（54 行），列出了所有版本的所有细节
- **建议**：只展示当前版本亮点 + 下一版本计划（10 行以内）

### 🟢 轻微问题（P2 - 可以优化）

#### 8. 常用命令表格位置不当 ⚠️
- **问题**：第 286-297 行，放在配置之前
- **建议**：应该放在"快速开始"之后，或者删除（因为有侧边栏）

#### 9. Front Matter 字段说明过详 ⚠️
- **问题**：第 299-321 行（23 行），表格列出所有字段
- **建议**：链接到文档即可

#### 10. 技术栈章节无必要 ⚠️
- **问题**：第 323-329 行，普通用户不关心
- **建议**：移除或放到最后"给开发者"章节

---

## 🎯 重构目标

### 核心原则
1. **清晰高效**：信息层次分明，重点突出，避免冗余
2. **视觉优先**：用截图/动图展示，减少文字描述
3. **侧边栏优先**：突出主要交互方式，命令面板作为补充
4. **合理分层**：主 README 聚焦核心，详细内容拆分到独立文档

### 用户体验优化
- 用户能在 30 秒内���解插件核心价值
- 用户能在 2 分钟内开始使用
- 详细内容通过链接获取，不堆砌在主页

---

## 📐 新版 README 结构

### 总体布局（约 250-300 行，灵活调整）

```
1. 简介 + 特点亮点（15-20 行）
   - 一句话介绍
   - 核心特性（5 个要点）
   - 主截图

2. 快速演示（GIF/截图区）（5-10 行）
   - 侧边栏整体视图
   - 语法高亮效果
   - 敏感词检测效果

3. 侧边栏视图（新增！20-25 行）
   - 如何打开侧边栏
   - 项目概览
   - 章节管理
   - 人物设定
   - 其他操作

4. 核心功能（适当详细 60-80 行）
   - 语法高亮（5-8 行 + 截图）
   - 字数统计（8-10 行 + 要点列表）
   - 智能格式化（5-6 行）
   - 敏感词检测（12-15 行 + 截图 + 要点）
   - 随机起名（8-10 行 + 截图）
   - 分卷管理（新增！12-15 行 + 要点）
   - 写作辅助（5-6 行）

5. 快速开始（25-30 行）
   - 安装
   - 打开侧边栏
   - 初始化项目
   - 创建章节
   - 开始写作

6. 文件格式说明（简化 15-20 行）
   - 章节文件示例（精简版）
   - 人物文件示例（精简版）
   - Front Matter 关键字段说明
   - 链接到详细文档

7. 配置指南（20-25 行）
   - 项目级配置说明
   - 核心配置示例（8-10 项关键配置）
   - 配置文档链接

8. 常用命令（10-12 行）
   - 常用命令表格
   - 快捷键提示

9. 常见问题（15-20 行）
   - 6-8 个最常见问题

10. 版本亮点（15-20 行）
   - 当前版本（v0.6.0）亮点
   - 下一版本计划
   - 历史版本链接

11. 其他信息（10-15 行）
   - 贡献指南
   - 开源协议
   - 联系方式
```

**说明**：
- 总计约 **250-300 行**，比原来的 428 行减少 30-40%
- 不强制压缩，保留必要的详细信息
- 核心功能部分适当展开，方便用户直接了解
- 配置部分保留关键配置，不过分精简

---

## 📝 详细章节内容方案

### 1️⃣ 简介 + 特点亮点（精简版）

```markdown
# Noveler - 中文小说写作助手

专为中文小说写作设计的 VS Code 插件，让创作更专注、更高效。

## ✨ 核心特性

- 📝 **语法高亮** - 对话、人物名称自动高亮，内容一目了然
- 📊 **精准字数** - 符合网文标准的实时字数统计
- 🛡️ **敏感词检测** - 三级词库自动检测，规避审核风险
- 📚 **分卷管理** - 支持多卷结构，适合长篇创作
- ✍️ **随机起名** - 7 种风格，数千种组合，一键生成角色名
- 🎨 **智能格式化** - 标点、引号、空格自动规范

![侧边栏视图](images/screenshot-sidebar.png)
```

**要点**：
- 15 行以内
- 突出 6 大核心功能
- 需要新增"侧边栏视图"主截图

---

### 2️⃣ 侧边栏视图（新增章节！）

```markdown
## 🎛️ 侧边栏视图

点击左侧活动栏的 📖 图标打开 Noveler 侧边栏，这是插件的主要操作界面。

![侧边栏完整视图](images/screenshot-sidebar-full.png)

### 项目概览
- 显示小说名称、总字数、章节数
- 一键访问配置文件
- 快速更新 README

### 章节管理
- 查看所有章节及状态（草稿/初稿/修改中/已完成）
- 右键章节：重命名、标记状态、删除
- 鼠标悬停显示详细字数统计
- **分卷支持**：创建卷、在卷内创建章节、移动章节

### 人物设定
- 查看所有人物档案
- 创建人物文件
- **随机起名**：一键生成各种风格的角色名

### 其他操作
- 格式化文档
- 敏感词配置
- 切换专注模式
```

**要点**：
- 这是最重要的新增内容！
- 明确告诉用户从哪里开始
- 需要侧边栏完整视图截图

---

### 3️⃣ 核心功能（精简版）

```markdown
## 🚀 核心功能

### 📝 语法高亮
自动高亮对话和人物名称，让小说内容层次分明。支持 6 种引号格式。

![语法高亮效果](images/screenshot-highlight.png)

---

### 📊 字数统计
符合网文标准的实时统计，状态栏显示总计/正文/标点。

- ✅ 实时更新，选中文本单独统计
- ✅ 自动排�� Front Matter、标题、注释
- ✅ 侧边栏悬停查看详细统计
- ✅ 保存时自动更新章节字数

---

### 🛡️ 敏感词检测
三级词库系统，自动检测敏感词汇，帮助规避审核风险。

- **三级词库**：高危（政治、严重违法）、中危（色情、宗教）、低危（广告、脏话）
- **实时检测**：输入时自动检测（防抖 500ms）
- **快速修复**：添加白名单、删除、替换、忽略
- **自定义词库**：支持项目级黑名单和白名单

![敏感词检测](images/screenshot-sensitive-word.png)

---

### 📚 分卷管理
支持多卷结构，适合长篇小说创作。

- **创建卷**：在侧边栏点击创建，支持正文/前传/后传/番外
- **章节管理**：在卷内创建章节，移动/复制章节到其他卷
- **结构迁移**：一键从扁平结构迁移到分卷，支持回滚
- **统计显示**：状态栏显示当前章节所属卷及统计信息

---

### ✍️ 随机起名
一键生成角色名，7 种风格任选。

- **丰富选择**：中文（现代/古典/玄幻）、英文、日文、西幻、虚构
- **智能交互**："再来一组"快速生成更多选项
- **多种操作**：创建人物文件、复制、插入到光标位置

![随机起名](images/screenshot-name-generator.png)

---

### 🎨 智能格式化
一键规范标点、引号、空格。

- 引号统一（中英文互转）
- 标点规范（双向转换）
- 删除多余空格
- 统一省略号（…）和破折号（——）

> 💡 更多功能详见 [完整功能文档](docs/功能详解.md)
```

**要点**：
- 每个功能 3-5 行
- 突出核心价值
- **分卷管理**从路线图提前到核心功能
- 需要补充敏感词检测和随机起名截图

---

### 4️⃣ 快速开始（改为侧边栏操作流程）

```markdown
## ⚡ 快速开始

### 1. 安装插件
在 VS Code 扩展市场搜索 "Noveler" 并安装。

### 2. 打开侧边栏
点击左侧活动栏的 📖 图标，打开 Noveler 侧边栏。

### 3. 初始化项目
在侧边栏点击"初始化项目"按钮，输入小说名称。

插件会自动创建：
```
my-novel/
├── chapters/       # 章节目录
├── characters/     # 人物目录
├── drafts/         # 草稿和大纲
├── references/     # 参考资料
├── novel.jsonc     # 小说配置
└── README.md       # 项目说明
```

### 4. 创建章节
在侧边栏"章节管理"组点击 ➕ 按钮，输入章节名称。

### 5. 开始写作
打开章节文件，享受语法高亮和实时字数统计！

> 💡 提示：也可以使用命令面板（Cmd/Ctrl+Shift+P）输入"Noveler"查看所有命令。
```

**要点**：
- 从侧边栏开始，而不是命令面板
- 简化为 5 步
- 保留命令面板作为备选

---

### 5️⃣ 配置指南（精简版）

```markdown
## ⚙️ 配置

### 核心配置
在项目根目录的 `novel.jsonc` 文件中配置（侧边栏可一键打开）：

```json
{
  "name": "我的小说",
  "noveler": {
    // 敏感词检测
    "sensitiveWords": {
      "enabled": true,
      "levels": { "high": true, "medium": true, "low": false }
    },
    // 自动功能
    "autoEmptyLine": true,        // 自动空行
    "paragraphIndent": true,      // 段落缩进
    "autoSave": true,             // 自动保存
    // 分卷功能
    "volumes": {
      "enabled": false            // 是否启用分卷结构
    }
  }
}
```

> 📖 完整配置说明请查看 [novel.jsonc 配置文档](docs/novel-json配置说明.md)
```

**要点**：
- 从 74 行减少到 15 行
- 只保留最常用的 5 个配置
- 链接到详细文档

---

### 6️⃣ 常见问题（精简版）

```markdown
## ❓ 常见问题

**Q: 如何打开侧边栏？**
A: 点击左侧活动栏的 📖 图标，或使用命令 `Noveler: 打开侧边栏`。

**Q: 字数统计包含标点吗？**
A: 包含。总计 = 正文（汉字+字母+数字）+ 标点。符合网文计费标准。

**Q: 敏感词检测会影响性能吗？**
A: 不会。使用防抖技术（500ms）和高效算法（Trie 树），只在必要时检测。

**Q: 如何切换到分卷结构？**
A: 使用命令 `Noveler: 迁移到分卷结构`，插件会引导你完成迁移。

**Q: 格式化会修改我的内容吗？**
A: 不会修改文字，只调整标点符号和空格。Front Matter 和注释不受影响。

> 更多问题请访问 [FAQ 文档](docs/FAQ.md) 或 [提交 Issue](https://github.com/ChangFang911/vscode-plugin-noveler/issues)
```

**要点**：
- 精选 5-6 个最常见问题
- 侧边栏相关问题优先

---

### 7️⃣ 版本亮点（精简版）

```markdown
## 🎉 版本亮点

### 当前版本 v0.6.0
- ✨ 随机起名功能（7 种姓名风格，数千种组合）
- 🔧 简化迁移流程
- 📚 完整的分卷管理功能

### 下一版本计划 v0.7.0+
- 🤖 AI 写作助手集成
- 📈 写作目标跟踪
- 🔄 更丰富的导出格式（EPUB、PDF）

> 完整路线图请查看 [CHANGELOG.md](CHANGELOG.md)
```

**要点**：
- 从 54 行减少到 10 行
- 只展示当前版本和下一版本
- 历史版本放到 CHANGELOG

---

## 📸 截图/动图需求清单

### 必须补充（P0）
1. ✅ **侧边栏整体视图** - 最重要！
   - 文件名：`images/screenshot-sidebar-full.png`
   - 内容：展示所有功能组（项目概览、章节、人物、其他操作）

2. ❌ **敏感词检测效果**
   - 文件名：`images/screenshot-sensitive-word.png`
   - 内容：波浪线标记 + Quick Fix 菜单 + 问题面板

3. ❌ **随机起名交互**
   - 文件名：`images/screenshot-name-generator.png` 或 GIF
   - 内容：名字列表 + "再来一组"按钮 + 操作选项

### 建议补充（P1）
4. ❌ **分卷管理视图**
   - 文件名：`images/screenshot-volumes.png`
   - 内容：侧边栏显示多个卷及其章节

5. ❌ **项目统计仪表板**
   - 文件名：`images/screenshot-stats-dashboard.png`
   - 内容：统计 Webview 界面

### 已有截图（保留）
- ✅ `screenshot-highlight.png` - 语法高亮
- ✅ `screenshot-wordcount.png` - 字数统计
- ✅ `screenshot-create-chapter.png` - 创建章节
- ✅ `screenshot-readme-update.png` - README 更新
- ✅ `screenshot-frontmatter.png` - Front Matter 示例
- ✅ `screenshot-character.png` - 人物文件示例

---

## 📦 配套文档拆分

### 需要创建的独立文档

1. **docs/功能详解.md** - 所有功能的详细说明
   - 从 README 移出的详细内容
   - 每个功能的完整介绍、配置、使用技巧

2. **docs/分卷管理指南.md** - 分卷功能专项文档
   - 什么时候使用分卷
   - 如何创建和管理卷
   - 迁移和回滚流程
   - 最佳实践

3. **docs/FAQ.md** - 完整常见问题
   - 从 README 移出的问题
   - 更多用户反馈的问题

4. **docs/文件格式说明.md** - Front Matter 详细说明
   - 章节文件格式
   - 人物文件格式
   - 所有字段详解

5. **CHANGELOG.md** - 完整版本历史
   - 所有版本的更新日志
   - 从 README 移出的路线图历史

---

## 🎯 实施步骤

### Phase 1: 准备工作
- [ ] 截取侧边栏整体视图截图
- [ ] 截取敏感词检测效果截图
- [ ] 录制或��取随机起名交互
- [ ] 准备分卷管理截图

### Phase 2: 创建配套文档
- [ ] 创建 `docs/功能详解.md`
- [ ] 创建 `docs/分卷管理指南.md`
- [ ] 创建 `docs/FAQ.md`
- [ ] 创建 `docs/文件格式说明.md`
- [ ] 创建 `CHANGELOG.md`

### Phase 3: 重写 README
- [ ] 重写简介和特性亮点（15-20 行）
- [ ] 新增侧边栏视图章节（20-25 行）
- [ ] 重写核心功能章节（60-80 行，适当详细）
- [ ] 改写快速开始流程（25-30 行）
- [ ] 简化文件格式说明（15-20 行）
- [ ] 优化配置指南（20-25 行）
- [ ] 补充常用命令（10-12 行）
- [ ] 精选常见问题（15-20 行）
- [ ] 精简版本亮点（15-20 行）
- [ ] 添加所有文档链接

### Phase 4: 验证和优化
- [ ] 检查所有链接有效性
- [ ] 确认截图清晰度和相关性
- [ ] 验证总行数（目标 250-300 行）
- [ ] 检查信息层次和逻辑流畅度
- [ ] 请他人试读，收集反馈

---

## 📊 预期效果

### 改进指标
- ��� 总行数：**428 行 → 200 行**（减少 53%）
- ✅ 冗余内容：**58% → 0%**
- ✅ 关键截图：**4 张 → 8+ 张**
- ✅ 信息密度：**过高 → 适中**
- ✅ 用户上手时间：**5-10 分钟 → 2 分钟**

### 用户体验
- 📖 30 秒了解插件价值
- 🚀 2 分钟完成首次使用
- 🎯 清晰的侧边栏操作指引
- 📚 详细内容通过文档链接获取

---

## 💡 关键要点总结

### 最重要的 3 个改变
1. **新增"侧边栏视图"章节** - 这是用户的主要入口！
2. **将"分卷管理"从路线图提到核心功能** - 已完整实现的功能不应该藏在路线图里
3. **精简冗长内容，拆分到独立文档** - 主 README 做索引，详细内容分离

### 写作原则
- 用截图代替文字描述
- 用链接代替长篇内容
- 突出"如何使用"而不是"有什么功能"
- 侧边栏优先，命令面板次之

---

## 📌 方案优化说明（2025-12-10 更新）

### 调整后的目标
- **长度控制**：250-300 行（而非严格的 200 行）
  - 比当前 428 行减少约 30-40%
  - 不强制压缩，以内容质量为优先
  - 该详细的地方（如核心功能）不省略

### 关键调整
1. **核心功能部分**：从 30-40 行扩展到 60-80 行
   - 敏感词检测、分卷管理等重要功能需要充分说明
   - 用户能直接在 README 中了解核心功能，而不必跳转文档

2. **配置指南**：从 15 行扩展到 20-25 行
   - 保留 8-10 项关键配置，而非只有 5 项
   - 配置是用户高频操作，适当详细有助于快速上手

3. **文件格式说明**：保留 15-20 行
   - Front Matter 是核心概念，需要基本示例
   - 完整示例链接到独立文档

### 优化原则
- **删除冗余**：路线图历史、过详的技术栈、重复的说明
- **保留精华**：核心功能详细说明、关键配置、实用示例
- **合理分层**：主 README 包含必要信息，深入内容分离到文档
- **视觉优先**：用截图/表格代替大段文字描述

### 为什么不强制 200 行？
1. **用户需求**：开发者需要在 README 中快速了解核心功能，过度精简会增加认知负担
2. **功能丰富**：插件包含 7 大核心功能，每个功能都值得适当展开
3. **质量优先**：清晰易懂比简短更重要
4. **行业惯例**：优秀的 VSCode 插件 README 通常在 250-400 行

250-300 行是在"简洁"和"完整"之间的最佳平衡点。
