# 常见问题 (FAQ)

本文档汇总了 Noveler 插件使用过程中的常见问题和解决方案。

---

## 📖 目录

- [安装和启动](#安装和启动)
- [侧边栏相关](#侧边栏相关)
- [字数统计](#字数统计)
- [语法高亮](#语法高亮)
- [格式化](#格式化)
- [敏感词检测](#敏感词检测)
- [分卷管理](#分卷管理)
- [项目管理](#项目管理)
- [配置相关](#配置相关)
- [性能问题](#性能问题)
- [其他问题](#其他问题)

---

## 安装和启动

### Q: 如何安装 Noveler？
**A**: 两种方式：
1. **推荐**：在 VS Code 扩展市场搜索 "Noveler" 并安装
2. 手动安装：下载 `.vsix` 文件，使用 `Extensions: Install from VSIX` 命令安装

### Q: 安装后没有任何反应？
**A**: 请检查：
1. VS Code 版本是否 >= 1.74.0
2. 重启 VS Code
3. 检查是否有错误提示（`帮助 > 切换开发人员工具 > Console`）
4. 确保打开了一个工作区文件夹

### Q: 插件占用空间大吗？
**A**: 不大。插件本体约 500KB，名字库数据约 100KB，总计不到 1MB。

---

## 侧边栏相关

### Q: 如何打开侧边栏？
**A**: 三种方式：
1. 点击左侧活动栏的 📖 图标
2. 使用命令 `查看: 显示 Noveler 小说助手`
3. 快捷键：默认无，可在 `文件 > 首选项 > 键盘快捷方式` 中自定义

### Q: 侧边栏显示"未初始化项目"？
**A**: 这是正常的。请：
1. 点击"初始化项目"按钮
2. 或使用命令 `Noveler: 初始化小说项目`
3. 输入小说名称即可

### Q: 侧边栏看不到章节/人物列表？
**A**: 请检查：
1. 是否已初始化项目（存在 `novel.jsonc` 文件）
2. `chapters/` 和 `characters/` 目录是否存在
3. 文件是否是 `.md` 格式
4. 尝试刷新侧边栏（点击刷新按钮）

### Q: 创建章节后侧边栏没有更新？
**A**: 通常会自动刷新。如果没有：
1. 点击侧边栏的刷新按钮
2. 保存一下该章节文件
3. 重启 VS Code（极少数情况）

---

## 字数统计

### Q: 字数统计包含标点吗？
**A**: 包含。统计规则：
- **总计** = 正文 + 标点（不含空格）
- **正文** = 中文汉字 + 英文字母和数字
- **标点** = 中文标点 + 英文标点

这符合网文计费标准。

### Q: 为什么我的字数和其他工具不一样？
**A**: 因为统计规则不同：
- Noveler **排除**：Front Matter、Markdown 标题标记（`#`）、HTML 注释、所有空格
- Noveler **包含**：所有标点符号
- 其他工具可能计算方式不同

如果需要其他统计方式，建议使用专门的字数统计工具。

### Q: Front Matter 中的 wordCount 不更新？
**A**: 保存文件时自动更新。如果没更新：
1. 确认文件确实保存了（`Cmd/Ctrl+S`）
2. 检查文件是否在 `chapters/` 目录下
3. 尝试删除 `wordCount` 字段后重新保存

### Q: 选中文本时字数统计消失了？
**A**: 不会消失，而是切换到显示选中部分的统计。取消选中即恢复。

### Q: 状态栏不显示字数统计？
**A**: 请检查：
1. 当前文件是否是 Markdown 格式
2. 配置中 `wordCount.showInStatusBar` 是否为 `true`
3. 尝试切换到其他文件再切换回来

---

## 语法高亮

### Q: 为什么我的人物名称没有高亮？
**A**: 人物名称高亮需要：
1. 人物文件在 `characters/` 目录下，或
2. 在 `novel.jsonc` 的 `characters` 数组中添加名称

两种方式都会生效。

### Q: 对话没有高亮？
**A**: 请检查：
1. 是否使用了支持的引号：`「」` `""` `""` `''` `""` `''`
2. 引号必须成对出现
3. 尝试重新加载高亮（命令：`Noveler: 重载高亮配置`）

### Q: 如何自定义高亮颜色？
**A**: 在 `novel.jsonc` 中配置：
```jsonc
{
  "noveler": {
    "highlight": {
      "dialogue": {
        "color": "#ce9178",  // 对话颜色
        "backgroundColor": "rgba(206, 145, 120, 0.15)"  // 背景色
      },
      "character": {
        "color": "#4ec9b0",  // 人物名称颜色
        "fontWeight": "bold"  // 字体粗细
      }
    }
  }
}
```

### Q: 高亮突然消失了？
**A**: 尝试：
1. 切换到其他文件再切换回来
2. 重新加载高亮：`Noveler: 重载高亮配置`
3. 重启 VS Code

---

## 格式化

### Q: 格式化会修改我的内容吗？
**A**: 不会修改文字内容，只调整：
- 标点符号（统一为配��的样式）
- 引号（转换为配置的样式）
- 空格（删除中文之间多余空格）
- 特殊符���（统一省略号和破折号）

Front Matter 和 HTML 注释不会被格式化。

### Q: 如何更改引号样式？
**A**: 在 `novel.jsonc` 中设置：
```jsonc
{
  "noveler": {
    "format": {
      "chineseQuoteStyle": "「」"  // 或 """" 或 """"
    }
  }
}
```

### Q: 格式化后如何撤销？
**A**: 使用 VS Code 的撤销功能：`Cmd/Ctrl+Z`

### Q: 可以只格式化选中的部分吗？
**A**: 目前不支持。格式化会应用于整个文档。

### Q: 格式化很慢？
**A**: 正常情况下应该是即时的。如果很慢：
1. 检查文件大小（超大文件可能较慢）
2. 关闭其他占用资源的插件
3. 重启 VS Code

---

## 敏感词检测

### Q: 敏感词检测会影响性能吗？
**A**: 不会。我们使用：
- 防抖技术（500ms）：只在停止输入后检测
- 高效算法（Trie 树）：检测速度极快
- 异步处理：不阻塞编辑器

### Q: 如何关闭敏感词检测？
**A**: 在 `novel.jsonc` 中设置：
```jsonc
{
  "noveler": {
    "sensitiveWords": {
      "enabled": false
    }
  }
}
```

### Q: 可以只启用部分词库吗？
**A**: 可以。配置示例：
```jsonc
{
  "noveler": {
    "sensitiveWords": {
      "levels": {
        "high": true,    // 启用高危词库
        "medium": true,  // 启用中危词库
        "low": false     // 禁用低危词库
      }
    }
  }
}
```

### Q: 如何添加自定义敏感词？
**A**:
1. 使用命令 `Noveler: 打开敏感词配置`
2. 在 `.noveler/sensitive-words/custom-words.jsonc` 中添加
3. 保存后自动重新加载

### Q: 如何添加白名单（如人物名）？
**A**: 三种方式：
1. 右键选中文字 > `Noveler: 添加到白名单`
2. 点击敏感词的 Quick Fix > "添加到白名单"
3. 手动编辑 `.noveler/sensitive-words/whitelist.jsonc`

### Q: 敏感词库会自动更新吗？
**A**: 词库随插件更新而更新。自定义词库需要手动维护。

---

## 分卷管理

### Q: 如何启用分卷功能？
**A**: 在 `novel.jsonc` 中设置：
```jsonc
{
  "noveler": {
    "volumes": {
      "enabled": true
    }
  }
}
```

### Q: 如何从扁平结构迁移到分卷？
**A**: 使用命令 `Noveler: 迁移到分卷结构`，插件会引导你：
1. 选择如何分卷
2. 自动创建卷文件夹
3. 移动章节文件
4. 更新配置

### Q: 分卷后可以回滚吗？
**A**: 可以。使用命令 `Noveler: 回滚到扁平结构`。
注意：建议迁移前备份项目。

### Q: 章节编号模式有什么区别？
**A**:
- **全局连续** (`sequential`)：所有章节连续编号（第 1 章、第 2 章...）
- **按卷重置** (`reset`)：每卷重新编号（第一卷-第 1 章、第二卷-第 1 章...）
- **混合模式** (`hybrid`)：卷内连续，全局也连续（第 1 章 [卷1-1]、第 2 章 [卷1-2]...）

### Q: 如何移动章节到其他卷？
**A**: 在侧边栏右键章节 > `移动到其他卷` > 选择目标卷

### Q: 卷类型有什么用？
**A**:
- **正文**：主线剧情
- **前传**：故事前的剧情（排序在正文前）
- **后传**：主线后的延续（排序在正文后）
- **番外**：独立的特别篇章（排序在最后）

影响侧边栏中卷的排序��

---

## 项目管理

### Q: 必须初始化项目才能使用吗？
**A**: 不是必须，但强烈建议。初始化后：
- 自动创建标准目录结构
- 启用所有插件功能
- 侧边栏可正常显示

### Q: 可以在已有项目中初始化吗？
**A**: 可以，但会创建缺失的目录和配置文件。建议在空文件夹中初始化。

### Q: 如何备份我的小说项目？
**A**:
1. 整个文件夹压缩备份（最简单）
2. 使用 Git 版本控制（推荐）
3. 云同步工具（如 OneDrive、iCloud）

### Q: 可以多人协作吗？
**A**: 可以。使用 Git + GitHub/GitLab：
1. 将项目推送到远程仓库
2. 协作者克隆仓库
3. 分工创建不同章节
4. 通过 Pull Request 合并

### Q: README 自动更新会覆盖我的内容吗？
**A**: 不会。只更新特定标记之间的内容：
- `<!-- NOVELER_STATS_START -->` 到 `<!-- NOVELER_STATS_END -->`
- `<!-- NOVELER_CHAPTERS_START -->` 到 `<!-- NOVELER_CHAPTERS_END -->`
- `<!-- NOVELER_CHARACTERS_START -->` 到 `<!-- NOVELER_CHARACTERS_END -->`

其他内容不受影响。

---

## 配置相关

### Q: novel.jsonc 和 novel.json 有什么区别？
**A**:
- `novel.jsonc`：支持注释，推荐使用
- `novel.json`：��准 JSON，不支持注释

插件优先读取 `novel.jsonc`，如果不存在则读取 `novel.json`。

### Q: 配置文件丢失了怎么办？
**A**:
1. 使用命令 `Noveler: 打开配置文件`
2. 如果不存在，插件会提示创建
3. 选择"创建"，会生成带注释的默认配置

### Q: 修改配置后需要重启吗？
**A**: 大部分配置自动生效。少数情况需要：
1. 重新打开文件
2. 刷新侧边栏
3. 重启 VS Code（极少数）

### Q: 可以导出/导入配置吗？
**A**: 可以。`novel.jsonc` 就是配置文件，可以：
1. 复制到其他项目
2. 提交到 Git 仓库共享
3. 备份到云端

---

## 性能问题

### Q: 大型项目（100+ 章节）会卡吗？
**A**: 不会。插件经过优化：
- 懒加载：按需加载数据
- 防抖：减少不必要的计算
- 异步处理：不阻塞 UI

### Q: 为什么有时候输入有延迟？
**A**: 可能原因：
1. 敏感词检测（500ms 防抖）- 这是正常的
2. 其他插件冲突
3. 文件过大（建议单章不超过 1 万字）
4. 电脑性能不足

可以尝试禁用敏感词检测或关闭其他插件。

### Q: 如何优化插件性能？
**A**:
1. 只启用需要的功能
2. 分卷管理大型项目
3. 定期清理不用的草稿文件
4. 关闭不必要的其他插件

---

## 其他问题

### Q: 支持哪些操作系统？
**A**: 所有 VS Code 支持的系统：
- Windows 7+
- macOS 10.11+
- Linux（主流发行版）

### Q: 是否支持多语言？
**A**: 目前只支持中文。插件专为中文小说写作优化。

### Q: 插件是否收费？
**A**: 完全免费，开源（MIT License）。

### Q: 如何报告 Bug 或建议功能？
**A**:
1. [GitHub Issues](https://github.com/ChangFang911/vscode-plugin-noveler/issues)
2. [GitHub Discussions](https://github.com/ChangFang911/vscode-plugin-noveler/discussions)

### Q: 可以禁用某些功能吗？
**A**: 可以。大部分功能都可以在配置中禁用：
- 字数统计：`wordCount.showInStatusBar: false`
- 敏感词检测：`sensitiveWords.enabled: false`
- 自动空行：`autoEmptyLine: false`
- 自动保存：`autoSave: false`

### Q: 与其他 Markdown 插件冲突吗？
**A**: 通常不会。Noveler 只在小说项目中激活特定功能。如有冲突，可以：
1. 为小说项目创建专门的工作区配置
2. 使用配置文件控制功能启用
3. 提交 Issue 报告具体冲突

### Q: 为什么叫 Noveler？
**A**: Novel（小说）+ er（创作者） = Noveler（小说创作者）

### Q: 未来会支持哪些功能？
**A**: 查看我们的[路线图](../CHANGELOG.md)：
- AI 写作助手
- 写作目标跟踪
- 导出功能（EPUB、PDF）
- 人物关系图可视化

---

## 📚 更多帮助

- [文件格式说明](文件格式说明.md) - Front Matter 字段详解
- [配置文档](novel-json配置说明.md) - 完整配置选项
- [更新日志](../CHANGELOG.md) - 版本更新历史
- [GitHub Issues](https://github.com/ChangFang911/vscode-plugin-noveler/issues) - 报告问题
- [GitHub Discussions](https://github.com/ChangFang911/vscode-plugin-noveler/discussions) - 讨论和建议

---

**没有找到你的问题？** 欢迎在 [GitHub Discussions](https://github.com/ChangFang911/vscode-plugin-noveler/discussions) 提问！
